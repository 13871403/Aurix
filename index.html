<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Aurix</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<style>
/* ØªÙ…Ø§Ù… Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø´Ù…Ø§ Ø­ÙØ¸ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ */
body{  
  margin:0;  
  font-family:sans-serif;  
  direction:rtl;  
  min-height:100dvh;  
  background-image: linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)), url("https://i.imgur.com/VYMs5FH.jpeg");  
  background-size:cover;  
  background-position:center;  
  background-repeat:no-repeat;  
  overflow-x:hidden;  
  width: 100%;
  touch-action: pan-y;
}  

.card{
  max-width:380px;
  margin:80px auto;
  padding:24px;
  border-radius:24px;
  background:#fff;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
}

h2{text-align:center;margin-bottom:16px}

input{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:15px;
  box-sizing:border-box;
}

button{
  width:100%;
  padding:18px;
  border:none;
  border-radius:999px;
  font-size:17px;
  font-weight:bold;
  cursor:pointer;
  background:linear-gradient(90deg,#ffcc00,#ff00ff);
}

#verify,#gameContainer,#bottomNav{display:none;}

.game-page{
  max-width:380px;
  margin:24px auto;
  padding:20px;
  border-radius:20px;
  background:#fff;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
  text-align:center;
  padding-bottom:100px;
  box-sizing:border-box;
}

#bottomNav{
  position:fixed;
  bottom:16px;
  left:16px;
  right:16px;
  height:68px;
  background:rgba(40, 20, 80, 0.55);
  backdrop-filter: blur(14px);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-radius:22px;
  border:1px solid rgba(255,255,255,0.15);
  box-shadow:0 10px 30px rgba(0,0,0,0.35),
  inset 0 1px 0 rgba(255,255,255,0.15);
  z-index:1000;
}

.nav-item{
  text-align:center;
  cursor:pointer;
  font-size:14.5px;
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.nav-item span{
  display:block;
  font-size:13px;
  margin-top:5px;
}

.nav-item i{font-size:18px}

.support-float{
  position:fixed;
  bottom:110px;
  right:20px;
  width:56px;
  height:56px;
  background:#0088cc;
  color:#fff;
  border-radius:50%;
  box-shadow:0 10px 25px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:999;
}

.support-float i{font-size:24px}

.profile-img{
  width:110px;
  height:110px;
  border-radius:50%;
  object-fit:cover;
  margin:10px auto;
  display:block;
  border:3px solid #eee;
}

input[type="file"]{display:none;}

.upload-btn{
  display:block;
  margin:12px auto;
  padding:12px;
  border-radius:14px;
  background:#f3f3f3;
  font-weight:bold;
  cursor:pointer;
  text-align:center;
}

#topNav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background-color: #5e3d93;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  z-index: 1000;
  color: white;
  width: 100%;
  box-sizing: border-box;
}

#topNav .logo {
  font-size: 30px;
  font-weight: 600;
  font-family: 'Poppins', sans-serif;
  color: white;
  letter-spacing: 2px;
}

* {
  box-sizing: border-box;
}

html, body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* âœ… Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÚ©ÙˆÙ† Ø§ÙˆØ±ÛŒÙ†Ùˆ */
.urino-icon {
  width: 22px;
  height: 22px;
  object-fit: contain;
  display: block;
  margin-bottom: 2px;
}

/* âœ… Ø§ØµÙ„Ø§Ø­ Ù‡Ù…â€ŒØªØ±Ø§Ø²ÛŒ Ø¢ÛŒÚ©ÙˆÙ† */
#bottomNav .nav-item img.urino-icon {
  width: 22px;
  height: 22px;
  margin-bottom: 5px;
}

#bottomNav .nav-item i,
#bottomNav .nav-item img.urino-icon {
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 5px;
}

/* ğŸ¨ ØµÙØ­Ù‡ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¬Ø¯ÛŒØ¯ */
.wallet-page-new {
  max-width: 380px;
  margin: 24px auto;
  padding: 0;
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  border-radius: 0;
  min-height: calc(100vh - 100px);
  color: white;
  overflow: hidden;
}

.wallet-header-new {
  padding: 30px 20px;
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  position: relative;
  text-align: center;
}

.wallet-title-new {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 5px;
}

.back-btn-wallet {
  position: absolute;
  top: 25px;
  right: 20px;
  background: rgba(255,255,255,0.2);
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  color: white;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.balance-card-new {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 25px;
  margin: 20px;
  border: 1px solid rgba(255,255,255,0.2);
  text-align: center;
}

.balance-label-new {
  font-size: 16px;
  opacity: 0.9;
  margin-bottom: 10px;
}

.balance-amount-new {
  font-size: 42px;
  font-weight: 800;
  margin: 10px 0;
  direction: ltr;
}

.balance-currency-new {
  font-size: 18px;
  opacity: 0.8;
}

.actions-grid-new {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
  padding: 0 20px;
  margin: 30px 0;
}

.action-btn-new {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 15px;
  padding: 15px 10px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  backdrop-filter: blur(5px);
}

.action-btn-new:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-3px);
}

.action-icon-new {
  width: 40px;
  height: 40px;
  background: white;
  border-radius: 50%;
  margin: 0 auto 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: #3b82f6;
}

.action-text-new {
  font-size: 13px;
  font-weight: 600;
}

.transactions-section-new {
  padding: 0 20px;
  margin-bottom: 100px;
}

.transactions-title-new {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 15px;
  text-align: right;
  padding-right: 10px;
}

.transactions-list-new {
  background: rgba(255,255,255,0.05);
  border-radius: 15px;
  padding: 15px;
  border: 1px solid rgba(255,255,255,0.1);
}

.transaction-item-new {
  display: flex;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.transaction-item-new:last-child {
  border-bottom: none;
}

.transaction-icon-new {
  width: 36px;
  height: 36px;
  background: rgba(59, 130, 246, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: #60a5fa;
  margin-left: 12px;
}

.transaction-details-new {
  flex: 1;
  text-align: right;
}

.transaction-title-new {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 3px;
}

.transaction-date-new {
  font-size: 12px;
  opacity: 0.7;
}

.transaction-amount-new {
  font-weight: 700;
  font-size: 16px;
  direction: ltr;
}

.positive-new { color: #10b981; }
.negative-new { color: #f87171; }
</style>
</head>
<body>

<div id="welcomePopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.6); z-index:9999; align-items:center; justify-content:center;">
  <div style="background:#fff; width:85%; max-width:320px; padding:24px; border-radius:22px; text-align:center;">
    <h3>ğŸ® Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ Ø¨Ù‡ Aurix</h3>
    <p>Ø§Ø² Ø­Ø¶ÙˆØ±Øª Ø®ÙˆØ´Ø­Ø§Ù„ÛŒÙ…ØŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø§Ø²ÛŒ Ù‡Ø³ØªÛŒØŸ</p>
    <button onclick="closeWelcome()">Ø¨Ø§Ø´Ù‡</button>
  </div>
</div>

<div id="topNav">
  <div class="nav-item">
    <i class="fas fa-shopping-cart"></i>
  </div>
  <div class="logo">
    <span>Aurix</span>
  </div>
  <div class="nav-item" onclick="openSideMenu()">
    <i class="fas fa-bars"></i>
  </div>
</div>

<!-- Ú©Ø§Ø±Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
<div id="register" class="card">
  <h2>Aurix</h2>
  <input id="fullName" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„">
  <input id="phoneNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„" type="tel">
  <input id="emailAddress" placeholder="Ø§ÛŒÙ…ÛŒÙ„" type="email">
  <button onclick="doRegister()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
  <button class="login-btn" onclick="showLogin()">ÙˆØ±ÙˆØ¯</button>
</div>

<!-- ØµÙØ­Ù‡ ØªØ£ÛŒÛŒØ¯ Ú©Ø¯ -->
<div id="verify" class="card">
  <h2>Ø¯Ø±ÛŒØ§ÙØª Ùˆ ØªØ£ÛŒÛŒØ¯ Ú©Ø¯</h2>
  <p id="showPhone" style="text-align:center"></p>
  <a href="https://t.me/Aurix2025_bot" target="_blank">ğŸ¤– ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø±Ø¨Ø§Øª Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯</a>
  <input id="codeInput" placeholder="Ú©Ø¯ Ø¯Ø±ÛŒØ§ÙØªÛŒ">
  <button onclick="verifyCode()">âœ… ØªØ£ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯</button>
</div>

<div id="gameContainer">
  <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
  <div id="homePage" class="game-page">
    <h3>ğŸ  ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</h3>
    <p>Ø¨Ù‡ Aurix Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</p>
    <div class="support-float" onclick="openSupport()">
      <i class="fas fa-headset"></i>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¬Ø¯ÛŒØ¯ -->
  <div id="walletPageNew" class="wallet-page-new" style="display:none;">
    <div class="wallet-header-new">
      <button class="back-btn-wallet" onclick="showPage('homePage')">
        <i class="fas fa-arrow-right"></i>
      </button>
      <h2 class="wallet-title-new"><i class="fas fa-wallet"></i> Ú©ÛŒÙ Ù¾ÙˆÙ„</h2>
    </div>
    
    <div class="balance-card-new">
      <div class="balance-label-new">Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ</div>
      <div class="balance-amount-new" id="balanceNewDisplay">0</div>
      <div class="balance-currency-new">ØªÙˆÙ…Ø§Ù†</div>
    </div>
    
    <div class="actions-grid-new">
      <div class="action-btn-new" onclick="showPage('gatewayPage')">
        <div class="action-icon-new">
          <i class="fas fa-plus"></i>
        </div>
        <div class="action-text-new">Ø´Ø§Ø±Ú˜ Ø­Ø³Ø§Ø¨</div>
      </div>
      
      <div class="action-btn-new" onclick="withdrawNew()">
        <div class="action-icon-new">
          <i class="fas fa-arrow-down"></i>
        </div>
        <div class="action-text-new">Ø¨Ø±Ø¯Ø§Ø´Øª</div>
      </div>
      
      <div class="action-btn-new" onclick="showReportsNew()">
        <div class="action-icon-new">
          <i class="fas fa-chart-bar"></i>
        </div>
        <div class="action-text-new">Ú¯Ø²Ø§Ø±Ø´</div>
      </div>
    </div>
    
    <div class="transactions-section-new">
      <h3 class="transactions-title-new"><i class="fas fa-list"></i> Ø¢Ø®Ø±ÛŒÙ† ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</h3>
      <div class="transactions-list-new" id="transactionsNewList">
        <!-- ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª -->
  <div id="gatewayPage" class="game-page">
    <h3>ğŸ’³ Ù¾Ø±Ø¯Ø§Ø®Øª Ø§Ù…Ù† Aurix</h3>
    <p>Ù…Ø¨Ù„Øº Ø§Ù†ØªØ®Ø§Ø¨ÛŒ:</p>
    <button onclick="pay(100000)">100,000 ØªÙˆÙ…Ø§Ù†</button>
    <button onclick="pay(500000)" style="margin-top:10px">500,000 ØªÙˆÙ…Ø§Ù†</button>
    <button onclick="pay(1000000)" style="margin-top:10px">1,000,000 ØªÙˆÙ…Ø§Ù†</button>
    <button onclick="showPage('walletPageNew')" style="margin-top:16px;background:#eee;color:#000;">Ø§Ù†ØµØ±Ø§Ù</button>
  </div>

  <!-- ØµÙØ­Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ -->
  <div id="accountPage" class="game-page">
    <h3>ğŸ‘¤ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h3>
    <img id="profileImg" class="profile-img" src="https://i.imgur.com/8Km9tLL.png">
    <label for="avatarInput" class="upload-btn">ğŸ“· ØªØºÛŒÛŒØ± ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÙØ§ÛŒÙ„</label>
    <input id="avatarInput" type="file" accept="image/*" onchange="changeAvatar(event)">
    <input id="usernameInput" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
    <button onclick="saveUsername()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</button>
    <p id="currentUsername" style="margin-top:10px;font-weight:bold"></p>
  </div>

  <!-- ØµÙØ­Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
  <div id="settingsPage" class="game-page">
    <h3>âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h3>
    <button class="exit-btn" onclick="logout()">Ø®Ø±ÙˆØ¬ <span>â†ª</span></button>
  </div>
</div>

<div id="bottomNav">
  <div class="nav-item" onclick="showPage('homePage')">
    <i class="fas fa-gamepad"></i>
    <span>Ø¨Ø§Ø²ÛŒ</span>
  </div>
  <div class="nav-item" onclick="showPage('walletPageNew')">
    <i class="fas fa-wallet"></i>
    <span>Ú©ÛŒÙ Ù¾ÙˆÙ„</span>
  </div>
  <div class="nav-item" onclick="showPage('accountPage')">
    <img src="https://i.postimg.cc/50FkcM0j/1767637411576-019b8f65-9032-766d-96ba-e554b6ffc8ae.png" class="urino-icon" alt="Ø§ÙˆØ±ÛŒÙ†Ùˆ">
    <span>Ø§ÙˆØ±ÛŒÙ†Ùˆ</span>
  </div>
  <div class="nav-item" onclick="showPage('settingsPage')">
    <i class="fas fa-cog"></i>
    <span>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</span>
  </div>
</div>

<script>
// ØªÙ…Ø§Ù… Ú©Ø¯Ù‡Ø§ÛŒ JavaScript Ù‚Ø¨Ù„ÛŒ Ø´Ù…Ø§ + ØªÙˆØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯
const validCodes = ["AURIX-ALPHA", "AURIX-BRAVO", "AURIX-CHARLIE", "AURIX-DELTA", "AURIX-ECHO"];
let balance = parseInt(localStorage.getItem("aurix_balance") || "0");

// ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡
const transactionsData = [
  { title: "Ø®Ø±ÛŒØ¯ Ø§Ø² ÙØ±ÙˆØ´Ú¯Ø§Ù‡", date: "Û±Û´Û°Û²/Û±Û±/Û²Û°", amount: -250000, icon: "fas fa-shopping-cart" },
  { title: "Ø´Ø§Ø±Ú˜ Ø­Ø³Ø§Ø¨", date: "Û±Û´Û°Û²/Û±Û±/Û±Û¸", amount: 500000, icon: "fas fa-plus-circle" },
  { title: "Ø¨Ø±Ø¯Ø§Ø´Øª ÙˆØ¬Ù‡", date: "Û±Û´Û°Û²/Û±Û±/Û±Ûµ", amount: -100000, icon: "fas fa-arrow-down" },
  { title: "Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø§ÛŒØ²Ù‡", date: "Û±Û´Û°Û²/Û±Û±/Û±Û°", amount: 75000, icon: "fas fa-gift" }
];

// ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ
function showPage(pageId) {
  // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª
  document.querySelectorAll(".game-page, .wallet-page-new").forEach(page => {
    page.style.display = "none";
  });
  
  // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
  document.getElementById(pageId).style.display = "block";
  
  // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¯Ø± Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¬Ø¯ÛŒØ¯
  if (pageId === 'walletPageNew') {
    updateBalanceNew();
    loadTransactionsNew();
  }
}

function updateBalanceNew() {
  document.getElementById("balanceNewDisplay").textContent = balance.toLocaleString('fa-IR');
}

function loadTransactionsNew() {
  const container = document.getElementById("transactionsNewList");
  container.innerHTML = "";
  
  transactionsData.forEach(trans => {
    const item = document.createElement("div");
    item.className = "transaction-item-new";
    item.innerHTML = `
      <div class="transaction-icon-new"><i class="${trans.icon}"></i></div>
      <div class="transaction-details-new">
        <div class="transaction-title-new">${trans.title}</div>
        <div class="transaction-date-new">${trans.date}</div>
      </div>
      <div class="transaction-amount-new ${trans.amount > 0 ? 'positive-new' : 'negative-new'}">
        ${trans.amount > 0 ? '+' : ''}${Math.abs(trans.amount).toLocaleString('fa-IR')}
      </div>
    `;
    container.appendChild(item);
  });
}

function pay(amount) {
  balance += amount;
  localStorage.setItem("aurix_balance", balance);
  updateBalanceNew();
  alert("âœ… Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯");
  showPage("walletPageNew");
}

function withdrawNew() {
  alert("ğŸ’° Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø¯Ø§Ø´Øª Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯");
}

function showReportsNew() {
  alert("ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø³Øª");
}

function doRegister() {
  const fullName = document.getElementById("fullName");
  const phoneNumber = document.getElementById("phoneNumber");
  const emailAddress = document.getElementById("emailAddress");
  
  if (!fullName.value || !phoneNumber.value || !emailAddress.value) {
    alert("Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");
    return;
  }
  
  document.getElementById("register").style.display = "none";
  document.getElementById("verify").style.display = "block";
  document.getElementById("showPhone").textContent = "ğŸ“± " + phoneNumber.value;
}

function verifyCode() {
  const codeInput = document.getElementById("codeInput");
  const code = codeInput.value.trim().toUpperCase();
  
  if (!validCodes.includes(code)) {
    alert("âŒ Ú©Ø¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª");
    return;
  }
  
  localStorage.setItem("aurix_logged", "true");
  document.getElementById("verify").style.display = "none";
  document.getElementById("gameContainer").style.display = "block";
  document.getElementById("bottomNav").style.display = "flex";
  document.getElementById("topNav").style.display = "flex";
  
  showPage("homePage");
  
  if (!localStorage.getItem("aurix_welcome_shown")) {
    document.getElementById("welcomePopup").style.display = "flex";
  }
}

function closeWelcome() {
  localStorage.setItem("aurix_welcome_shown", "true");
  document.getElementById("welcomePopup").style.display = "none";
}

function showLogin() {
  alert("Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ØŒ Ø§Ø¨ØªØ¯Ø§ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯");
}

function openSupport() {
  window.open("https://t.me/Aurix_2026", "_blank");
}

function logout() {
  localStorage.removeItem("aurix_logged");
  location.reload();
}

function saveUsername() {
  const usernameInput = document.getElementById("usernameInput");
  if (!usernameInput.value) return;
  
  localStorage.setItem("aurix_username", usernameInput.value);
  document.getElementById("currentUsername").textContent = "Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ: " + usernameInput.value;
}

function changeAvatar(e) {
  const file = e.target.files[0];
  if (!file) return;
  
  const reader = new FileReader();
  reader.onload = function() {
    document.getElementById("profileImg").src = reader.result;
    localStorage.setItem("aurix_avatar", reader.result);
  };
  reader.readAsDataURL(file);
}

function openSideMenu() {
  // Ø³Ø§ÛŒØ¯ Ù…Ù†Ùˆ Ø³Ø§Ø¯Ù‡
  const menuItems = `
    <div style="position:fixed; top:0; right:0; width:250px; height:100%; background:#5e3d93; color:white; padding:80px 20px; z-index:2000;">
      <button onclick="closeSideMenu()" style="position:absolute; top:20px; left:20px; background:none; border:none; color:white; font-size:28px;">Ã—</button>
      <h3>Ù…Ù†ÙˆÛŒ Aurix</h3>
      <button onclick="showPage('homePage'); closeSideMenu();" style="width:100%; padding:15px; margin:10px 0; background:rgba(255,255,255,0.1); border:none; border-radius:10px; color:white;">ğŸ  ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</button>
      <button onclick="showPage('walletPageNew'); closeSideMenu();" style="width:100%; padding:15px; margin:10px 0; background:rgba(255,255,255,0.1); border:none; border-radius:10px; color:white;">ğŸ’° Ú©ÛŒÙ Ù¾ÙˆÙ„</button>
      <button onclick="showPage('accountPage'); closeSideMenu();" style="width:100%; padding:15px; margin:10px 0; background:rgba(255,255,255,0.1); border:none; border-radius:10px; color:white;">ğŸ‘¤ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</button>
      <button onclick="showPage('settingsPage'); closeSideMenu();" style="width:100%; padding:15px; margin:10px 0; background:rgba(255,255,255,0.1); border:none; border-radius:10px; color:white;">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
      <button onclick="openSupport(); closeSideMenu();" style="width:100%; padding:15px; margin:10px 0; background:rgba(255,255,255,0.1); border:none; border-radius:10px; color:white;">ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</button>
      <button onclick="logout(); closeSideMenu();" style="width:100%; padding:15px; margin:10px 0; background:rgba(255,255,255,0.1); border:none; border-radius:10px; color:white;">ğŸšª Ø®Ø±ÙˆØ¬</button>
    </div>
    <div onclick="closeSideMenu()" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1999;"></div>
  `;
  
  const menuDiv = document.createElement("div");
  menuDiv.innerHTML = menuItems;
  document.body.appendChild(menuDiv);
  menuDiv.id = "sideMenuTemp";
}

function closeSideMenu() {
  const menu = document.getElementById("sideMenuTemp");
  if (menu) menu.remove();
}

// Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
window.onload = function() {
  updateBalanceNew();
  
  if (localStorage.getItem("aurix_logged") === "true") {
    document.getElementById("register").style.display = "none";
    document.getElementById("verify").style.display = "none";
    document.getElementById("gameContainer").style.display = "block";
    document.getElementById("bottomNav").style.display = "flex";
    document.getElementById("topNav").style.display = "flex";
    showPage("homePage");
  } else {
    document.getElementById("topNav").style.display = "none";
  }
};
</script>
</body>
  </html>
